<app-header title="Add stock"></app-header>

<ion-content>
  <form [formGroup]="addstockForm" (ngSubmit)="addStock()">
    <ion-modal [isOpen]="modalOpen" (willDismiss)="ngOnInit()">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Choose Model</ion-title>
          </ion-toolbar>
        </ion-header>
        <ion-content>
          <ion-list>
            <ion-item *ngFor="let modal of modals" (click)="setModel(modal)">
              <ion-label (click)="modalOpen=false">{{modal?.name |titlecase}}</ion-label>
            </ion-item>
          </ion-list>
        </ion-content>
      </ng-template>
    </ion-modal>
    <ng-container *ngIf="selectedModel">
      <ion-item>
        <ion-label position="floating">{{selectedModel.name}} Name</ion-label>
        <ion-input type="text"></ion-input>
      </ion-item>
      <ion-list>
        <ion-item *ngFor="let field of selectedModel.fields">
          <ion-label position="floating">{{field.name | titlecase}}</ion-label>
          <ion-input [type]="field.unit.value" [formControl]="field.control"></ion-input>
        </ion-item>
      </ion-list>
      <ion-button type="submit" expand="block" fill="solid">
        Submit
      </ion-button>
    </ng-container>
  </form>
</ion-content>